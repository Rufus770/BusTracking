{"ast":null,"code":"var _jsxFileName = \"/Users/rufus/Desktop/Bus tracking/bus-tracking-app/frontend/src/pages/BusSelectionPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport busService from '../services/busService';\nimport io from 'socket.io-client';\nimport { MapContainer, TileLayer, Marker, Popup } from 'react-leaflet';\nimport { useNavigate } from 'react-router-dom';\nimport L from 'leaflet';\nimport '../styles/BusPages.css';\n\n// Create custom bus icon\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst busIcon = L.divIcon({\n  className: 'custom-bus-icon',\n  html: `<div style=\"font-size: 32px; text-align: center;\">üöå</div>`,\n  iconSize: [40, 40],\n  iconAnchor: [20, 20],\n  popupAnchor: [0, -20]\n});\nconst BusSelectionPage = () => {\n  _s();\n  const [buses, setBuses] = useState([]);\n  const [selectedBus, setSelectedBus] = useState(null);\n  const [position, setPosition] = useState(null);\n  const [error, setError] = useState('');\n  const socketRef = useRef(null);\n  const watchIdRef = useRef(null);\n  const navigate = useNavigate();\n  useEffect(() => {\n    const fetchBuses = async () => {\n      try {\n        const token = localStorage.getItem('driverToken');\n        if (!token) {\n          setError('Not authorized');\n          return;\n        }\n        const res = await busService.getBuses(token);\n        setBuses(res.data);\n      } catch (err) {\n        setError('Could not fetch buses');\n      }\n    };\n    fetchBuses();\n    socketRef.current = io('https://bus-tracking-backend-vwjm.onrender.com'); // Adjust if your backend is elsewhere\n\n    return () => {\n      // Disconnect socket and stop watching location on component unmount\n      if (socketRef.current) {\n        socketRef.current.disconnect();\n      }\n      if (watchIdRef.current) {\n        navigator.geolocation.clearWatch(watchIdRef.current);\n      }\n    };\n  }, []);\n  const handleBusSelection = busId => {\n    setSelectedBus(busId);\n\n    // Stop tracking previous bus if any\n    if (watchIdRef.current) {\n      navigator.geolocation.clearWatch(watchIdRef.current);\n    }\n\n    // Start tracking location\n    if (navigator.geolocation) {\n      watchIdRef.current = navigator.geolocation.watchPosition(position => {\n        const {\n          latitude,\n          longitude\n        } = position.coords;\n        const newPosition = [latitude, longitude];\n        setPosition(newPosition);\n        socketRef.current.emit('locationUpdate', {\n          busId,\n          lat: latitude,\n          lng: longitude\n        });\n      }, err => {\n        console.error('Geolocation error:', err);\n        setError('Could not get location. Please enable location services.');\n      }, {\n        enableHighAccuracy: true\n      });\n    } else {\n      setError('Geolocation is not supported by this browser.');\n    }\n  };\n  const handleLogout = () => {\n    localStorage.removeItem('driverToken');\n    navigate('/');\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bus-page\",\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleLogout,\n      className: \"logout-btn\",\n      children: \"Logout\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 13\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error-icon\",\n        children: \"\\u26A0\\uFE0F\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"error-title\",\n        children: \"Error\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"error-message\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 17\n    }, this), !selectedBus && !error && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bus-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"bus-title\",\n          children: \"Select Your Bus\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"bus-subtitle\",\n          children: \"Choose a bus to start tracking\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 21\n      }, this), buses.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bus-grid\",\n        children: buses.map(bus => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bus-card\",\n          onClick: () => handleBusSelection(bus.id),\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"bus-card-icon\",\n            children: \"\\uD83D\\uDE8C\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 37\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"bus-card-name\",\n            children: bus.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 37\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"bus-card-id\",\n            children: [\"ID: \", bus.id]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 37\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"bus-card-arrow\",\n            children: \"\\u2192\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 37\n          }, this)]\n        }, bus.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 33\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 25\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"empty-state\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"empty-state-icon\",\n          children: \"\\uD83D\\uDE8C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"empty-state-title\",\n          children: \"No Buses Available\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"empty-state-text\",\n          children: \"Please check back later\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 25\n      }, this)]\n    }, void 0, true), selectedBus && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"tracking-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"tracking-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"tracking-status\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"tracking-status-icon\",\n            children: \"\\uD83D\\uDCE1\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"tracking-status-text\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"Tracking Active\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 140,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Your location is being broadcast in real-time\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 141,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"tracking-info\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"tracking-info-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"tracking-info-icon\",\n              children: \"\\uD83D\\uDE8C\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 146,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"tracking-info-label\",\n                children: \"Bus ID\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 148,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"tracking-info-value\",\n                children: selectedBus\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 149,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 147,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"tracking-info-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"tracking-info-icon\",\n              children: \"\\uD83D\\uDCCD\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 153,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"tracking-info-label\",\n                children: \"Status\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 155,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"tracking-info-value\",\n                children: position ? 'Live' : 'Acquiring...'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 156,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 154,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"map-container\",\n        children: position ? /*#__PURE__*/_jsxDEV(MapContainer, {\n          center: position,\n          zoom: 15,\n          children: [/*#__PURE__*/_jsxDEV(TileLayer, {\n            url: \"https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png\",\n            attribution: \"\\xA9 <a href=\\\"https://www.openstreetmap.org/copyright\\\">OpenStreetMap</a> contributors \\xA9 <a href=\\\"https://carto.com/attributions\\\">CARTO</a>\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(Marker, {\n            position: position,\n            icon: busIcon,\n            children: /*#__PURE__*/_jsxDEV(Popup, {\n              children: \"Your Current Location\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 170,\n              columnNumber: 37\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 29\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"map-loading\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"map-loading-spinner\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"map-loading-text\",\n            children: \"Acquiring your location...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 29\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 95,\n    columnNumber: 9\n  }, this);\n};\n_s(BusSelectionPage, \"1KSt4kJ1hV39UpOjTKQJnebKRFU=\", false, function () {\n  return [useNavigate];\n});\n_c = BusSelectionPage;\nexport default BusSelectionPage;\nvar _c;\n$RefreshReg$(_c, \"BusSelectionPage\");","map":{"version":3,"names":["React","useState","useEffect","useRef","busService","io","MapContainer","TileLayer","Marker","Popup","useNavigate","L","jsxDEV","_jsxDEV","Fragment","_Fragment","busIcon","divIcon","className","html","iconSize","iconAnchor","popupAnchor","BusSelectionPage","_s","buses","setBuses","selectedBus","setSelectedBus","position","setPosition","error","setError","socketRef","watchIdRef","navigate","fetchBuses","token","localStorage","getItem","res","getBuses","data","err","current","disconnect","navigator","geolocation","clearWatch","handleBusSelection","busId","watchPosition","latitude","longitude","coords","newPosition","emit","lat","lng","console","enableHighAccuracy","handleLogout","removeItem","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","length","map","bus","id","name","center","zoom","url","attribution","icon","_c","$RefreshReg$"],"sources":["/Users/rufus/Desktop/Bus tracking/bus-tracking-app/frontend/src/pages/BusSelectionPage.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport busService from '../services/busService';\nimport io from 'socket.io-client';\nimport { MapContainer, TileLayer, Marker, Popup } from 'react-leaflet';\nimport { useNavigate } from 'react-router-dom';\nimport L from 'leaflet';\nimport '../styles/BusPages.css';\n\n// Create custom bus icon\nconst busIcon = L.divIcon({\n    className: 'custom-bus-icon',\n    html: `<div style=\"font-size: 32px; text-align: center;\">üöå</div>`,\n    iconSize: [40, 40],\n    iconAnchor: [20, 20],\n    popupAnchor: [0, -20]\n});\n\nconst BusSelectionPage = () => {\n    const [buses, setBuses] = useState([]);\n    const [selectedBus, setSelectedBus] = useState(null);\n    const [position, setPosition] = useState(null);\n    const [error, setError] = useState('');\n    const socketRef = useRef(null);\n    const watchIdRef = useRef(null);\n    const navigate = useNavigate();\n\n    useEffect(() => {\n        const fetchBuses = async () => {\n            try {\n                const token = localStorage.getItem('driverToken');\n                if (!token) {\n                    setError('Not authorized');\n                    return;\n                }\n                const res = await busService.getBuses(token);\n                setBuses(res.data);\n            } catch (err) {\n                setError('Could not fetch buses');\n            }\n        };\n\n        fetchBuses();\n\n        socketRef.current = io('https://bus-tracking-backend-vwjm.onrender.com'); // Adjust if your backend is elsewhere\n\n        return () => {\n            // Disconnect socket and stop watching location on component unmount\n            if (socketRef.current) {\n                socketRef.current.disconnect();\n            }\n            if (watchIdRef.current) {\n                navigator.geolocation.clearWatch(watchIdRef.current);\n            }\n        };\n    }, []);\n\n    const handleBusSelection = (busId) => {\n        setSelectedBus(busId);\n        \n        // Stop tracking previous bus if any\n        if (watchIdRef.current) {\n            navigator.geolocation.clearWatch(watchIdRef.current);\n        }\n\n        // Start tracking location\n        if (navigator.geolocation) {\n            watchIdRef.current = navigator.geolocation.watchPosition(\n                (position) => {\n                    const { latitude, longitude } = position.coords;\n                    const newPosition = [latitude, longitude];\n                    setPosition(newPosition);\n                    socketRef.current.emit('locationUpdate', {\n                        busId,\n                        lat: latitude,\n                        lng: longitude,\n                    });\n                },\n                (err) => {\n                    console.error('Geolocation error:', err);\n                    setError('Could not get location. Please enable location services.');\n                },\n                { enableHighAccuracy: true }\n            );\n        } else {\n            setError('Geolocation is not supported by this browser.');\n        }\n    };\n\n    const handleLogout = () => {\n        localStorage.removeItem('driverToken');\n        navigate('/');\n    };\n\n    return (\n        <div className=\"bus-page\">\n            <button onClick={handleLogout} className=\"logout-btn\">Logout</button>\n            \n            {error && (\n                <div className=\"error-container\">\n                    <div className=\"error-icon\">‚ö†Ô∏è</div>\n                    <h3 className=\"error-title\">Error</h3>\n                    <p className=\"error-message\">{error}</p>\n                </div>\n            )}\n\n            {!selectedBus && !error && (\n                <>\n                    <div className=\"bus-header\">\n                        <h2 className=\"bus-title\">Select Your Bus</h2>\n                        <p className=\"bus-subtitle\">Choose a bus to start tracking</p>\n                    </div>\n                    \n                    {buses.length > 0 ? (\n                        <div className=\"bus-grid\">\n                            {buses.map((bus) => (\n                                <div key={bus.id} className=\"bus-card\" onClick={() => handleBusSelection(bus.id)}>\n                                    <span className=\"bus-card-icon\">üöå</span>\n                                    <h3 className=\"bus-card-name\">{bus.name}</h3>\n                                    <span className=\"bus-card-id\">ID: {bus.id}</span>\n                                    <span className=\"bus-card-arrow\">‚Üí</span>\n                                </div>\n                            ))}\n                        </div>\n                    ) : (\n                        <div className=\"empty-state\">\n                            <div className=\"empty-state-icon\">üöå</div>\n                            <h3 className=\"empty-state-title\">No Buses Available</h3>\n                            <p className=\"empty-state-text\">Please check back later</p>\n                        </div>\n                    )}\n                </>\n            )}\n\n            {selectedBus && (\n                <div className=\"tracking-container\">\n                    <div className=\"tracking-header\">\n                        <div className=\"tracking-status\">\n                            <span className=\"tracking-status-icon\">üì°</span>\n                            <div className=\"tracking-status-text\">\n                                <h3>Tracking Active</h3>\n                                <p>Your location is being broadcast in real-time</p>\n                            </div>\n                        </div>\n                        <div className=\"tracking-info\">\n                            <div className=\"tracking-info-item\">\n                                <span className=\"tracking-info-icon\">üöå</span>\n                                <div>\n                                    <div className=\"tracking-info-label\">Bus ID</div>\n                                    <div className=\"tracking-info-value\">{selectedBus}</div>\n                                </div>\n                            </div>\n                            <div className=\"tracking-info-item\">\n                                <span className=\"tracking-info-icon\">üìç</span>\n                                <div>\n                                    <div className=\"tracking-info-label\">Status</div>\n                                    <div className=\"tracking-info-value\">{position ? 'Live' : 'Acquiring...'}</div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n\n                    <div className=\"map-container\">\n                        {position ? (\n                            <MapContainer center={position} zoom={15}>\n                                <TileLayer\n                                    url=\"https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png\"\n                                    attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors &copy; <a href=\"https://carto.com/attributions\">CARTO</a>'\n                                />\n                                <Marker position={position} icon={busIcon}>\n                                    <Popup>Your Current Location</Popup>\n                                </Marker>\n                            </MapContainer>\n                        ) : (\n                            <div className=\"map-loading\">\n                                <div className=\"map-loading-spinner\"></div>\n                                <p className=\"map-loading-text\">Acquiring your location...</p>\n                            </div>\n                        )}\n                    </div>\n                </div>\n            )}\n        </div>\n    );\n};\n\nexport default BusSelectionPage;\n\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,MAAM,QAAQ,OAAO;AAC1D,OAAOC,UAAU,MAAM,wBAAwB;AAC/C,OAAOC,EAAE,MAAM,kBAAkB;AACjC,SAASC,YAAY,EAAEC,SAAS,EAAEC,MAAM,EAAEC,KAAK,QAAQ,eAAe;AACtE,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,OAAOC,CAAC,MAAM,SAAS;AACvB,OAAO,wBAAwB;;AAE/B;AAAA,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AACA,MAAMC,OAAO,GAAGL,CAAC,CAACM,OAAO,CAAC;EACtBC,SAAS,EAAE,iBAAiB;EAC5BC,IAAI,EAAE,4DAA4D;EAClEC,QAAQ,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC;EAClBC,UAAU,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC;EACpBC,WAAW,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE;AACxB,CAAC,CAAC;AAEF,MAAMC,gBAAgB,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC3B,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGzB,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAAC0B,WAAW,EAAEC,cAAc,CAAC,GAAG3B,QAAQ,CAAC,IAAI,CAAC;EACpD,MAAM,CAAC4B,QAAQ,EAAEC,WAAW,CAAC,GAAG7B,QAAQ,CAAC,IAAI,CAAC;EAC9C,MAAM,CAAC8B,KAAK,EAAEC,QAAQ,CAAC,GAAG/B,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAMgC,SAAS,GAAG9B,MAAM,CAAC,IAAI,CAAC;EAC9B,MAAM+B,UAAU,GAAG/B,MAAM,CAAC,IAAI,CAAC;EAC/B,MAAMgC,QAAQ,GAAGzB,WAAW,CAAC,CAAC;EAE9BR,SAAS,CAAC,MAAM;IACZ,MAAMkC,UAAU,GAAG,MAAAA,CAAA,KAAY;MAC3B,IAAI;QACA,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,aAAa,CAAC;QACjD,IAAI,CAACF,KAAK,EAAE;UACRL,QAAQ,CAAC,gBAAgB,CAAC;UAC1B;QACJ;QACA,MAAMQ,GAAG,GAAG,MAAMpC,UAAU,CAACqC,QAAQ,CAACJ,KAAK,CAAC;QAC5CX,QAAQ,CAACc,GAAG,CAACE,IAAI,CAAC;MACtB,CAAC,CAAC,OAAOC,GAAG,EAAE;QACVX,QAAQ,CAAC,uBAAuB,CAAC;MACrC;IACJ,CAAC;IAEDI,UAAU,CAAC,CAAC;IAEZH,SAAS,CAACW,OAAO,GAAGvC,EAAE,CAAC,gDAAgD,CAAC,CAAC,CAAC;;IAE1E,OAAO,MAAM;MACT;MACA,IAAI4B,SAAS,CAACW,OAAO,EAAE;QACnBX,SAAS,CAACW,OAAO,CAACC,UAAU,CAAC,CAAC;MAClC;MACA,IAAIX,UAAU,CAACU,OAAO,EAAE;QACpBE,SAAS,CAACC,WAAW,CAACC,UAAU,CAACd,UAAU,CAACU,OAAO,CAAC;MACxD;IACJ,CAAC;EACL,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMK,kBAAkB,GAAIC,KAAK,IAAK;IAClCtB,cAAc,CAACsB,KAAK,CAAC;;IAErB;IACA,IAAIhB,UAAU,CAACU,OAAO,EAAE;MACpBE,SAAS,CAACC,WAAW,CAACC,UAAU,CAACd,UAAU,CAACU,OAAO,CAAC;IACxD;;IAEA;IACA,IAAIE,SAAS,CAACC,WAAW,EAAE;MACvBb,UAAU,CAACU,OAAO,GAAGE,SAAS,CAACC,WAAW,CAACI,aAAa,CACnDtB,QAAQ,IAAK;QACV,MAAM;UAAEuB,QAAQ;UAAEC;QAAU,CAAC,GAAGxB,QAAQ,CAACyB,MAAM;QAC/C,MAAMC,WAAW,GAAG,CAACH,QAAQ,EAAEC,SAAS,CAAC;QACzCvB,WAAW,CAACyB,WAAW,CAAC;QACxBtB,SAAS,CAACW,OAAO,CAACY,IAAI,CAAC,gBAAgB,EAAE;UACrCN,KAAK;UACLO,GAAG,EAAEL,QAAQ;UACbM,GAAG,EAAEL;QACT,CAAC,CAAC;MACN,CAAC,EACAV,GAAG,IAAK;QACLgB,OAAO,CAAC5B,KAAK,CAAC,oBAAoB,EAAEY,GAAG,CAAC;QACxCX,QAAQ,CAAC,0DAA0D,CAAC;MACxE,CAAC,EACD;QAAE4B,kBAAkB,EAAE;MAAK,CAC/B,CAAC;IACL,CAAC,MAAM;MACH5B,QAAQ,CAAC,+CAA+C,CAAC;IAC7D;EACJ,CAAC;EAED,MAAM6B,YAAY,GAAGA,CAAA,KAAM;IACvBvB,YAAY,CAACwB,UAAU,CAAC,aAAa,CAAC;IACtC3B,QAAQ,CAAC,GAAG,CAAC;EACjB,CAAC;EAED,oBACItB,OAAA;IAAKK,SAAS,EAAC,UAAU;IAAA6C,QAAA,gBACrBlD,OAAA;MAAQmD,OAAO,EAAEH,YAAa;MAAC3C,SAAS,EAAC,YAAY;MAAA6C,QAAA,EAAC;IAAM;MAAAE,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAQ,CAAC,EAEpErC,KAAK,iBACFlB,OAAA;MAAKK,SAAS,EAAC,iBAAiB;MAAA6C,QAAA,gBAC5BlD,OAAA;QAAKK,SAAS,EAAC,YAAY;QAAA6C,QAAA,EAAC;MAAE;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC,eACpCvD,OAAA;QAAIK,SAAS,EAAC,aAAa;QAAA6C,QAAA,EAAC;MAAK;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eACtCvD,OAAA;QAAGK,SAAS,EAAC,eAAe;QAAA6C,QAAA,EAAEhC;MAAK;QAAAkC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACvC,CACR,EAEA,CAACzC,WAAW,IAAI,CAACI,KAAK,iBACnBlB,OAAA,CAAAE,SAAA;MAAAgD,QAAA,gBACIlD,OAAA;QAAKK,SAAS,EAAC,YAAY;QAAA6C,QAAA,gBACvBlD,OAAA;UAAIK,SAAS,EAAC,WAAW;UAAA6C,QAAA,EAAC;QAAe;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eAC9CvD,OAAA;UAAGK,SAAS,EAAC,cAAc;UAAA6C,QAAA,EAAC;QAA8B;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAG,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC7D,CAAC,EAEL3C,KAAK,CAAC4C,MAAM,GAAG,CAAC,gBACbxD,OAAA;QAAKK,SAAS,EAAC,UAAU;QAAA6C,QAAA,EACpBtC,KAAK,CAAC6C,GAAG,CAAEC,GAAG,iBACX1D,OAAA;UAAkBK,SAAS,EAAC,UAAU;UAAC8C,OAAO,EAAEA,CAAA,KAAMf,kBAAkB,CAACsB,GAAG,CAACC,EAAE,CAAE;UAAAT,QAAA,gBAC7ElD,OAAA;YAAMK,SAAS,EAAC,eAAe;YAAA6C,QAAA,EAAC;UAAE;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC,eACzCvD,OAAA;YAAIK,SAAS,EAAC,eAAe;YAAA6C,QAAA,EAAEQ,GAAG,CAACE;UAAI;YAAAR,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAK,CAAC,eAC7CvD,OAAA;YAAMK,SAAS,EAAC,aAAa;YAAA6C,QAAA,GAAC,MAAI,EAACQ,GAAG,CAACC,EAAE;UAAA;YAAAP,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAO,CAAC,eACjDvD,OAAA;YAAMK,SAAS,EAAC,gBAAgB;YAAA6C,QAAA,EAAC;UAAC;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC;QAAA,GAJnCG,GAAG,CAACC,EAAE;UAAAP,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAKX,CACR;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACD,CAAC,gBAENvD,OAAA;QAAKK,SAAS,EAAC,aAAa;QAAA6C,QAAA,gBACxBlD,OAAA;UAAKK,SAAS,EAAC,kBAAkB;UAAA6C,QAAA,EAAC;QAAE;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAK,CAAC,eAC1CvD,OAAA;UAAIK,SAAS,EAAC,mBAAmB;UAAA6C,QAAA,EAAC;QAAkB;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eACzDvD,OAAA;UAAGK,SAAS,EAAC,kBAAkB;UAAA6C,QAAA,EAAC;QAAuB;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAG,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC1D,CACR;IAAA,eACH,CACL,EAEAzC,WAAW,iBACRd,OAAA;MAAKK,SAAS,EAAC,oBAAoB;MAAA6C,QAAA,gBAC/BlD,OAAA;QAAKK,SAAS,EAAC,iBAAiB;QAAA6C,QAAA,gBAC5BlD,OAAA;UAAKK,SAAS,EAAC,iBAAiB;UAAA6C,QAAA,gBAC5BlD,OAAA;YAAMK,SAAS,EAAC,sBAAsB;YAAA6C,QAAA,EAAC;UAAE;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC,eAChDvD,OAAA;YAAKK,SAAS,EAAC,sBAAsB;YAAA6C,QAAA,gBACjClD,OAAA;cAAAkD,QAAA,EAAI;YAAe;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eACxBvD,OAAA;cAAAkD,QAAA,EAAG;YAA6C;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAG,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACnD,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACL,CAAC,eACNvD,OAAA;UAAKK,SAAS,EAAC,eAAe;UAAA6C,QAAA,gBAC1BlD,OAAA;YAAKK,SAAS,EAAC,oBAAoB;YAAA6C,QAAA,gBAC/BlD,OAAA;cAAMK,SAAS,EAAC,oBAAoB;cAAA6C,QAAA,EAAC;YAAE;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC,eAC9CvD,OAAA;cAAAkD,QAAA,gBACIlD,OAAA;gBAAKK,SAAS,EAAC,qBAAqB;gBAAA6C,QAAA,EAAC;cAAM;gBAAAE,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAK,CAAC,eACjDvD,OAAA;gBAAKK,SAAS,EAAC,qBAAqB;gBAAA6C,QAAA,EAAEpC;cAAW;gBAAAsC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAM,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACvD,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACL,CAAC,eACNvD,OAAA;YAAKK,SAAS,EAAC,oBAAoB;YAAA6C,QAAA,gBAC/BlD,OAAA;cAAMK,SAAS,EAAC,oBAAoB;cAAA6C,QAAA,EAAC;YAAE;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC,eAC9CvD,OAAA;cAAAkD,QAAA,gBACIlD,OAAA;gBAAKK,SAAS,EAAC,qBAAqB;gBAAA6C,QAAA,EAAC;cAAM;gBAAAE,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAK,CAAC,eACjDvD,OAAA;gBAAKK,SAAS,EAAC,qBAAqB;gBAAA6C,QAAA,EAAElC,QAAQ,GAAG,MAAM,GAAG;cAAc;gBAAAoC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAM,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC9E,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACL,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACL,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACL,CAAC,eAENvD,OAAA;QAAKK,SAAS,EAAC,eAAe;QAAA6C,QAAA,EACzBlC,QAAQ,gBACLhB,OAAA,CAACP,YAAY;UAACoE,MAAM,EAAE7C,QAAS;UAAC8C,IAAI,EAAE,EAAG;UAAAZ,QAAA,gBACrClD,OAAA,CAACN,SAAS;YACNqE,GAAG,EAAC,0EAA0E;YAC9EC,WAAW,EAAC;UAAmJ;YAAAZ,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAClK,CAAC,eACFvD,OAAA,CAACL,MAAM;YAACqB,QAAQ,EAAEA,QAAS;YAACiD,IAAI,EAAE9D,OAAQ;YAAA+C,QAAA,eACtClD,OAAA,CAACJ,KAAK;cAAAsD,QAAA,EAAC;YAAqB;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAO;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAChC,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACC,CAAC,gBAEfvD,OAAA;UAAKK,SAAS,EAAC,aAAa;UAAA6C,QAAA,gBACxBlD,OAAA;YAAKK,SAAS,EAAC;UAAqB;YAAA+C,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC,eAC3CvD,OAAA;YAAGK,SAAS,EAAC,kBAAkB;YAAA6C,QAAA,EAAC;UAA0B;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAG,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC7D;MACR;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACA,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACL,CACR;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACA,CAAC;AAEd,CAAC;AAAC5C,EAAA,CAtKID,gBAAgB;EAAA,QAODb,WAAW;AAAA;AAAAqE,EAAA,GAP1BxD,gBAAgB;AAwKtB,eAAeA,gBAAgB;AAAC,IAAAwD,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}